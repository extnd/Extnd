<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Extnd-Database'>/**
</span> * Represents a Domino Database
 */
Ext.define('Extnd.Database', {
<span id='Extnd-Database-property-acl'>    /**
</span>     * The access control list for a Extnd.Database
     * @property {Object} acl
     */

<span id='Extnd-Database-property-aclActivityLog'>    /**
</span>     * The log from the access control list for a database
     * @property {Array} aclActivityLog
     */

<span id='Extnd-Database-property-currentAccessLevel'>    /**
</span>     * current access level (see Extnd.ACCESS_LEVELS)
     * @property {Number} currentAccessLevel
     */

<span id='Extnd-Database-property-parent'>    /**
</span>     * parent {@link Extnd.Session} object
     * @property {Extnd.Session} parent
     */

<span id='Extnd-Database-property-server'>    /**
</span>     * server name
     * @property {String} server
     */

<span id='Extnd-Database-property-fileName'>    /**
</span>     * file name of the database
     * @property {String} fileName
     */

<span id='Extnd-Database-property-filePath'>    /**
</span>     * file system path to the database
     * @property {String} filePath
     */

<span id='Extnd-Database-property-webFilePath'>    /**
</span>     * analogous to @webdbname
     * @property {String} webFilePath
     */

<span id='Extnd-Database-property-title'>    /**
</span>     * database title
     * @property {String} title
     */

<span id='Extnd-Database-property-fileFormat'>    /**
</span>     * file format
     * @property {Number} fileFormat
     */

<span id='Extnd-Database-property-created'>    /**
</span>     * database created on date
     * @property {Date} created
     */

<span id='Extnd-Database-property-designTemplateName'>    /**
</span>     * name of design template
     * @property {String} designTemplateName
     */

<span id='Extnd-Database-property-isDB2'>    /**
</span>     * is DB2
     * @property {Boolean} isDB2
     */

<span id='Extnd-Database-property-httpURL'>    /**
</span>     * http url
     * @property {String} httpURL
     */

<span id='Extnd-Database-property-replicaID'>    /**
</span>     * database replica ID
     * @property {String} replicaID
     */

<span id='Extnd-Database-property-isDocumentLockingEnabled'>    /**
</span>     * is document locking enabled
     * @property {Boolean} isDocumentLockingEnabled
     */

<span id='Extnd-Database-property-isDesignLockingEnabled'>    /**
</span>     * is design locking enabled
     * @property {Boolean} isDesignLockingEnabled
     */

<span id='Extnd-Database-property-size'>    /**
</span>     * database size
     * @property {Number} size
     */

<span id='Extnd-Database-property-sizeQuota'>    /**
</span>     * size quota
     * @property {Number} sizeQuota
     */

<span id='Extnd-Database-property-sizeWarning'>    /**
</span>     * size warning
     * @property {Number} sizeWarning
     */

<span id='Extnd-Database-property-percentUsed'>    /**
</span>     * percentage used
     * @property {Number} percentUsed
     */

<span id='Extnd-Database-method-constructor'>    /**
</span>     * Creates a new Extnd.Database instance by making an Ajax call to the Extnd database to get the Database
     * properties for the database referred to in the #dbPath config.
     */
    constructor: function (config) {
        var me = this;

        Ext.apply(me, config);

        Ext.Ajax.request({
            method          : 'GET',
            disableCaching  : true,
            success         : me.onGetDatabaseSuccess,
            failure         : me.onGetDatabaseFailure,
            scope           : me,
            options         : config,
            url             : Ext.nd.extndUrl + 'Database?OpenAgent&amp;db=' + me.dbPath
        });

    },

<span id='Extnd-Database-method-onGetDatabaseSuccess'>    /**
</span>     * @private
     */
    onGetDatabaseSuccess: function (response, request) {
        var dbData  = Ext.decode(response.responseText),
            options = request.options;

        // apply dbData to this
        Ext.apply(this, dbData);

        // now call the callback and pass the database (this) to it
        Ext.callback(options.success, options.scope, [this]);
    },

<span id='Extnd-Database-method-onGetDatabaseFailure'>    /**
</span>     * @private
     */
    onGetDatabaseFailure: function (response) {
        console.log('failed');
    }

});
</pre>
</body>
</html>
